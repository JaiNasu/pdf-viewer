%My Own Addition
\newif\ifinvert
\invertfalse

\newcommand{\changecolor}{
  \ifinvert
    \newcommand{\emphcolor}{cyan!80!black}
    \newcommand{\txtcolor}{white}
    \pagecolor{black}
    \color{white}
    \tikzset{
      draw={\txtcolor}
    }
  \else
    \newcommand{\emphcolor}{blue}
    \newcommand{\txtcolor}{black}
  \fi
}

\newenvironment{Chapter}[1]{%
  \chapter{#1}%
  % \color{doc!60}\hrulefill
  % \startcontents[chapters]%
  % \printcontents[chapters]{}{1}{}%
  % \hrulefill\color{black}%
  \addthumb{#1}{%
    \thechapter.%
  }{white}{doc!60}
}{%
  % \stopcontents[chapters]%
}


\setmathfontface\caligraph{NewCMMath-Book.otf}
\setmathfontface\relfont{Fira Math}
\newcommand{\rel}[1]{%
  \ifcat\noexpand#1\noexpand a
    \symsfit{#1}
  \else
    \relfont{#1}
  \fi
}

% \usepackage{expl3,xparse}
% \ExplSyntaxOn
% \keys_define:nn { pluton / tensor } {
%   latin          .tl_set:N = \pluton_tensor_latin_tl,
%   greek          .tl_set:N = \pluton_tensor_greek_tl,
%   latin-alphabet .tl_set:N = \pluton_tensor_latin_alphabet_tl,
%   greek-alphabet .tl_set:N = \pluton_tensor_greek_alphabet_tl,
% }
% \cs_new:Nn \pluton_tensor:n {
%   \tl_if_in:NnTF \pluton_tensor_latin_alphabet_tl { #1 } {
%     \pluton_tensor_latin_tl { #1 }
%   } {
%     \tl_if_in:NnT \pluton_tensor_greek_alphabet_tl{ #1 } {
%       \pluton_tensor_greek_tl { #1 }
%     }
%   }
% }
% \NewDocumentCommand \rel { O{} m } {
%   \group_begin:
%   \keys_set:nn { pluton / tensor } {
%     latin-alphabet = abcdefhijklmnopqrstuvwxyz
%     ABCDEFHIJKLMNOPQRSTUVWXYZ,
%     greek-alphabet = \alpha\beta\delta\epsilon
%     \phi\gamma\eta\iota\theta
%     \kappa\lambda\mu\nu\pi\chi
%     \rho\sigma\tau\omega\xi\psi\xi
%     \Alpha\Beta\Delta\Epsilon  % capitals; some of
%     \Phi\Gamma\Eta\Iota\Theta  % these *definitely*
%     \Kappa\Lambda\Mu\Nu\Pi\Chi % aren't defined, but
%     \Rho\Sigma\Tau\Omega\Xi\Psi\Xi, % emacs helps :)
%     latin = \symsfit,
%     greek = \symsfit,
%     #1
%   }
%   \pluton_tensor:n { #2 }
%   \group_end:
% }
% \ExplSyntaxOff




\renewcommand{\emph}[1]{\textcolor{\emphcolor}{\sffamily\bfseries#1}}
\DeclareMathAlphabet{\amsmathcal}{OMS}{cmsy}{m}{n}

\newcommand{\epna}{\varepsilon_0}

\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\brac}[1]{\left\lparen #1 \right\rparen}
\newcommand{\mbrac}[1]{\left\lbrace #1 \right\rbrace}
\newcommand{\lbrac}[1]{\left\lbrack #1 \right\rbrack}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\abrac}[1]{\left\langle #1 \right\rangle}
\newcommand{\limit}[2]{\displaystyle{\lim_{#1 \rightarrow #2}}}
\newcommand{\largecup}[2]{\displaystyle{\bigcup^{#1}_{#2} \,}}
\newcommand{\largecap}[2]{\displaystyle{\bigcap^{#1}_{#2} \,}}
\newcommand{\real}{\mathbb{R}}
\newcommand{\ntrl}{\mathbb{N}}
\newcommand{\cmplx}{\mathbb{C}}
\newcommand{\rtnl}{\mathbb{Q}}
\newcommand{\inte}{\mathbb{Z}}
\newcommand{\sigfig}[1]{\quad \textrm{(#1 s.f.)}}
\newcommand{\decp}[1]{\quad \textrm{(#1 d.p.)}}
\newcommand{\shown}{\quad \textrm{(shown.)}}
\newcommand{\ord}[1]{\textsuperscript{#1}}
\newcommand{\ihat}{\, \hat{\imath}}
\newcommand{\jhat}{\, \hat{\jmath}}
\newcommand{\khat}{\, \hat{k}}
\newcommand{\degr}[1]{#1^{\circ}}
\newcommand{\prob}[1]{\mathbb{P}\brac{#1}}
\newcommand{\expt}[1]{\mathbb{E}\lbrac{#1}}
\newcommand{\expect}[1]{\left\langle #1 \right\rangle}
\newcommand{\var}[1]{\mathbb{V}\lbrac{#1}}
\newcommand{\zeroket}{\ket{\symbf{0}}}
\newcommand{\idty}{\hat{\symbf{I}}}
\newcommand{\threevec}[3]{\begin{pmatrix} #1 \\ #2 \\ #3 \end{pmatrix}}
\newcommand{\pobra}[2]{\left\lbrace #1 ,\, #2 \right\rbrace}
\newcommand{\commt}[2]{\left\lbrack #1 ,\, #2 \right\rbrack}
\newcommand{\lagr}{\symcal{L}}
\newcommand{\hami}{\symcal{H}}
\newcommand{\hilbert}{\symbfsf{H}}
\newcommand{\iffdef}{\underset{\mathrm{def}}{\iff}}

\renewcommand{\Re}{\text{Re }}
\renewcommand{\Im}{\text{Im }}


\DeclareMathOperator{\lapl}{\mathcal{L}}
\DeclareMathOperator{\fourier}{\mathcal{F}}


\DeclarePairedDelimiter{\bra}{\langle}{\rvert}%
\DeclarePairedDelimiter{\ket}{\lvert}{\rangle}%
\DeclarePairedDelimiterX\innerp[2]{\langle}{\rangle}{#1\delimsize\vert\mathopen{}#2}%
\DeclarePairedDelimiterX\braket[2]{\langle}{\rangle}{#1\delimsize\vert\mathopen{}#2}%
\DeclarePairedDelimiterX\braketop[3]{\langle}{\rangle}{#1\,\delimsize\vert\,\mathopen{}#2\,\delimsize\vert\,\mathopen{}#3}%
\DeclarePairedDelimiterX\ketbra[2]{\lvert}{\rvert}{#1\delimsize\rangle\!\delimsize\langle#2}%
\DeclarePairedDelimiterX\outerp[2]{\lvert}{\rvert}{#1\delimsize\rangle\!\delimsize\langle#2}%
\DeclarePairedDelimiterX\projector[1]{\lvert}{\rvert}{#1\delimsize\rangle\!\delimsize\langle#1}%

\newcommand{\ctext}[1]{\raise0.2ex\hbox{\textcircled{\scriptsize{#1}}}}
\newcommand{\plain}{\sffamily\normalsize\normalfont}

\newcommand{\independent}{\protect\mathpalette{\protect\independenT}{\perp}}
\def\independenT#1#2{\mathrel{\rlap{$#1#2$}\mkern2mu{#1#2}}}

\newcommand{\defcolor}{blue}
\newenvironment{defalign}{%
  \color{\defcolor}\align
}{%
  \endalign\color{black}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%From M275 "Topology" at SJSU
\newcommand{\id}{\mathrm{id}}
\newcommand{\taking}[1]{\xrightarrow{#1}}
\newcommand{\inv}{^{-1}}

%From M170 "Introduction to Graph Theory" at SJSU
\DeclareMathOperator{\diam}{diam}
\newcommand{\defeq}{\overset{\mathrm{def}}{=}}

%From the USAMO .tex files
\newcommand{\ts}{\textsuperscript}
\newcommand{\dg}{^\circ}
\newcommand{\ii}{\item}

% % From Math 55 and Math 145 at Harvard
% \newenvironment{subproof}[1][Proof]{%
% \begin{proof}[#1] \renewcommand{\qedsymbol}{$\blacksquare$}}%
% {\end{proof}}

\newcommand{\liff}{\leftrightarrow}
\newcommand{\lthen}{\rightarrow}
\newcommand{\opname}{\operatorname}
\newcommand{\surjto}{\twoheadrightarrow}
\newcommand{\injto}{\hookrightarrow}
\newcommand{\On}{\mathrm{On}} % ordinals
\DeclareMathOperator{\img}{im} % Image
\DeclareMathOperator{\Img}{Im} % Image
\DeclareMathOperator{\coker}{coker} % Cokernel
\DeclareMathOperator{\Coker}{Coker} % Cokernel
\DeclareMathOperator{\Ker}{Ker} % Kernel
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\Spec}{Spec} % spectrum
\DeclareMathOperator{\Tr}{Tr} % trace
\DeclareMathOperator{\pr}{pr} % projection
\DeclareMathOperator{\ext}{ext} % extension
\DeclareMathOperator{\pred}{pred} % predecessor
\DeclareMathOperator{\dom}{dom} % domain
\DeclareMathOperator{\ran}{ran} % range
\DeclareMathOperator{\Hom}{Hom} % homomorphism
\DeclareMathOperator{\Mor}{Mor} % morphisms
\DeclareMathOperator{\End}{End} % endomorphism

\newcommand{\eps}{\epsilon}
\newcommand{\veps}{\varepsilon}
\newcommand{\ol}{\overline}
\newcommand{\ul}{\underline}
\newcommand{\wt}{\widetilde}
\newcommand{\wh}{\widehat}
\newcommand{\vocab}[1]{\textbf{\color{blue} #1}}
\providecommand{\half}{\frac{1}{2}}
\newcommand{\dang}{\measuredangle} %% Directed angle
\newcommand{\ray}[1]{\overrightarrow{#1}}
\newcommand{\seg}[1]{\overline{#1}}
\renewcommand{\arc}[1]{\wideparen{#1}}
\DeclareMathOperator{\cis}{cis}
\DeclareMathOperator*{\lcm}{lcm}
\DeclareMathOperator*{\argmin}{arg min}
\DeclareMathOperator*{\argmax}{arg max}
\newcommand{\cycsum}{\sum_{\mathrm{cyc}}}
\newcommand{\symsum}{\sum_{\mathrm{sym}}}
\newcommand{\cycprod}{\prod_{\mathrm{cyc}}}
\newcommand{\symprod}{\prod_{\mathrm{sym}}}
\newcommand{\Qed}{\begin{flushright}\qed\end{flushright}}
\newcommand{\parinn}{\setlength{\parindent}{1cm}}
\newcommand{\parinf}{\setlength{\parindent}{0cm}}
% \newcommand{\norm}{\|\cdot\|}
\newcommand{\inorm}{\norm_{\infty}}
\newcommand{\opensets}{\{V_{\alpha}\}_{\alpha\in I}}
\newcommand{\oset}{V_{\alpha}}
\newcommand{\opset}[1]{V_{\alpha_{#1}}}
\newcommand{\lub}{\text{lub}}
\newcommand{\del}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\Del}[3]{\frac{\partial^{#1} #2}{\partial^{#1} #3}}
\newcommand{\deld}[2]{\dfrac{\partial #1}{\partial #2}}
\newcommand{\Deld}[3]{\dfrac{\partial^{#1} #2}{\partial^{#1} #3}}
\newcommand{\lm}{\lambda}
\newcommand{\uin}{\mathbin{\rotatebox[origin=c]{90}{$\in$}}}
\newcommand{\usubset}{\mathbin{\rotatebox[origin=c]{90}{$\subset$}}}
\newcommand{\lt}{\left}
\newcommand{\rt}{\right}
\newcommand{\bs}[1]{\boldsymbol{#1}}
\newcommand{\exs}{\exists}
\newcommand{\st}{\strut}
\newcommand{\dps}[1]{\displaystyle{#1}}

\newcommand{\sol}{\setlength{\parindent}{0cm}\textbf{\textit{Solution:}}\setlength{\parindent}{1cm} }
\newcommand{\solve}[1]{\setlength{\parindent}{0cm}\textbf{\textit{Solution: }}\setlength{\parindent}{1cm}#1 \Qed}


