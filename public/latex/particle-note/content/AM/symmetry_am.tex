\section{Symmetry of a System}
\subsection{Symmetry}
A fundamental concept in physics is \emph{symmetry}.
Let us see an example of symmetry in geometry:

\begin{figure}[htbp]
  \centering
  \begin{tikzpicture}[scale=1.2]
    \draw[thick] (-4, -1) node[left]{$A$} -- (-4, 1) node[left]{$B$} -- (-2, 1) node[right]{$C$} -- (-2, -1) node[right]{$D$} -- cycle;
    \draw[thick, dashed] (-3, -2.5) -- (-3, 2.5);
    \draw[ultra thick, ->] (-1.5, 0) -- (1.5, 0) node[midway, above]{Flip};
    \draw[thick] (2, -1) node[left]{$D$} -- (2, 1) node[left]{$C$} -- (4, 1) node[right]{$B$} -- (4, -1) node[right]{$A$} -- cycle;
    \draw[thick, dashed] (3, -2.5) -- (3, 2.5);
    \draw[thick, ->](-3.75, 1.2) arc[start angle=180, end angle = 0, radius=0.75];
  \end{tikzpicture}
  \caption{A square and its reflection.}
  \label{fig:symmetry_square}
\end{figure}
Notice how we flipped the square, and it looks the same without the labels.
In a more formal sense, we can say that the system(square) is \emph{invariant} under the transformation(flip).


\subsection{Transformations}
For example, Newtonian mechanics(or Newton's equation of motion) has some symmetries.
\eg{Equation of Motion}{
  For example, the equation of motion is unchanged under Galilean transformation.
  \begin{align}
    \sum \vec{F} & = m \vec{a}
  \end{align}
}
\dfn{Galilean Transformation}{
  The \emph{Galilean transformation} is a transformation of coordinates from a stationary observer to a moving observer with constant velocity $v$.
  \begin{align}
    \vec{\xi}(\vec{x}, t) & = \vec{x} - \vec{v} t
  \end{align}
  where $\vec{\xi}$ is the new coordinate, $\vec{x}$ is the old coordinate, $\vec{v}$ is the velocity of the observer, and $t$ is time.
}
and space/ time reversal:
\dfn{Space/Time Reversal}{
  The \emph{space reversal} is a transformation of coordinates that flips the sign of the position vector:
  \begin{align}
    \vec{x}' & = -\vec{x}
  \end{align}
  The \emph{time reversal} is a transformation of time that flips the sign of time:
  \begin{align}
    t' & = -t
  \end{align}
}



In the context of analytical mechanics, the system is described by the action $S$.
If the variation of the action $\delta S$ is invariant under a transformation, we say that the system has a symmetry under that transformation.

Notice that the Lagrangian has a degree of freedom(that is, the Lagrangian can be modified by adding a total derivative and variation of action remains the same):
\thm{Degree of Freedom in Lagrangian}{
  Adding a total derivative of time to the Lagrangian does not change the action:
  \begin{align}
    L'(q_i, \dot{q}_i, t) & = L(q_i, \dot{q}_i, t) + \odv{}{t}f(q(t), t) \implies \delta S'[L'] = \delta S[L]
  \end{align}
}
\pf{Proof}{
  The action is given by
  \begin{align}
    S'[L'] & = \int_{t_i}^{t_f} \odif{t} \, L'(q_i(t), \dot{q}_i(t), t)                                                   \\
           & = \int_{t_i}^{t_f} \odif{t} \, L(q_i(t), \dot{q}_i(t), t) + \int_{t_i}^{t_f} \odif{t} \, \odv{}{t}f(q(t), t) \\
           & = S[L] + \bab{\vphantom{\frac{a}{a}} f(q_i, t)}_{t_i}^{t_f} = S[L] + f(q_i(t_f), t_f) - f(q(t_i), t_i)
  \end{align}
  Since by taking the variation, $\delta q(t_f) = \delta q(t_i) = 0$, the last term is zero. Thus
  \begin{align}
    \delta S'[L'] & = \delta S[L]
  \end{align}
}


\subsection{Point Transformation}
In Analytical Mechanics, there is a general family of transformations called \emph{point transformation}.
\dfn{Point Transformation}{
  A \emph{point transformation} is a transformation of the generalized coordinates $q_i$ and time $t$ to new coordinates $Q_i$
  \begin{align}
    Q_j & = Q_j(q_i, t)
  \end{align}
  Note: if there are $N$ generalized coordinates $q_i$, then there must be $N$ new coordinates $Q_j$.
}
\eg{Point Transformation}{
  For example, changing from Cartesian coordinates to polar coordinates is a point transformation:
  \begin{alignat}{2}
    (x, y)      & \to (r, \theta) \quad \iff \begin{cases}
                                               r      & = \sqrt{x^2 + y^2}          \\
                                               \theta & = \arctan \pab{\frac{y}{x}}
                                             \end{cases} \\
    (r, \theta) & \to (x, y) \quad \iff \begin{cases}
                                          x & = r \cos \theta \\
                                          y & = r \sin \theta
                                        \end{cases}
  \end{alignat}
  notice how each new coordinate only depends on the old coordinates, not the velocity.
}
Point transformation does not change the action, i.e., the variation of the action is invariant under point transformation:
\thm{Invariance of Euler-Lagrange Equation}{
  The Euler-Lagrange equation is invariant under point transformation:
  \begin{align}
    \pdv{L}{q_i} - \odv{}{t} \pab{\pdv{L}{\dot{q}_i}} & = 0
    \implies \pdv{L}{Q_j} - \odv{}{t} \pab{\pdv{L}{\dot{Q}_j}}  = 0
  \end{align}
  proof is given in Sec. \ref{sec:invariance-euler-lagrange}.
}

Now, using the point transformation, we can give the definition of symmetry, in the context of analytical mechanics:
\dfn{Symmetry of the System}{
  A system is said to have a \emph{symmetry} under a point transformation $q_i \to Q_i$ if the change in Lagrangian is up to the degree of freedom:
  \begin{align}
    L(Q_i, \dot{Q}_i, t) & = L(q_i, \dot{q}_i, t) + \underbrace{\odv{}{t}f(q_i, t)}_{\text{change in } L}
  \end{align}
  where $L$ is the Lagrangian of the system before the point transformation. Note that the Lagrangian of LHS has the same functional form as RHS(i.e. $Q$ nad $\dot{Q}$ are substituted for $q$ and $\dot{q}$).
  Or equivalently, the action is invariant under the point transformation:
  \begin{align}
    S[Q_i, \dot{Q}_i, t] & = S[q_i, \dot{q}_i, t] + \int_{t_i}^{t_f} \odif{t} \, \odv{}{t}f(q_i, t) = S[q_i, \dot{q}_i, t]
  \end{align}
}

Importantly, the point transformation can be either discrete or continous, and collection of point transformations that preserve the action is called a \emph{group}.
In short, it means three things:
\begin{enumerate}
  \item There is an identity transformation (i.e. no change)
  \item If there are multiple transformations, there is a single transformation that is the result of applying those transformations in sequence.
  \item If there is a transformation, there is an \emph{inverse transformation} that undoes the transformation.
\end{enumerate}

This concept is very important in particle physics.

\subsection{Symmetry including Time}
So far we have seen symmetry under point transformation, but it is also useful to think about symmetry under transformations including time:
\begin{align}
  t'      & = t'(q_i, t)  \\
  Q_j(t') & = Q_j(q_i, t)
\end{align}
and define
\begin{align}
  \dot{Q}_j & := \odv{Q(t')}{t'}
\end{align}
For this transformation to be a symmetry of the system, the change in action must keep the variation of action invariant:
\begin{align}
  S[Q_i] & = \int_{t_i'}^{t_f'} \odif{t'} \, L(Q_i(t'), \dot{Q}_i(t'), t')       \\
         & = \int_{t_i}^{t_f} \odif{t} \odv{t'}{t} L(Q_i(t'), \dot{Q}_i(t'), t')
\end{align}
For the variation of action to be invariant, the change in Lagrangian must be up to the degree of freedom:
\begin{align}
  \odv{t'}{t} L(Q_i(t'), \dot{Q}_i(t'), t') & = L(q_i, \dot{q}_i, t) + \odv{}{t} f(q_i, t)
\end{align}
Thus the symmetry under the transformation including time is defined as:
\dfn{Symmetry of the System including Time}{
  A system is said to have a \emph{symmetry} under a transformation including time $t' = t'(q_i, t)$ and $Q_j(t') = Q_j(q_i, t)$ if the change in Lagrangian can be written as follows:
  \begin{align}
    \odv{t'}{t} L(Q_i(t'), \dot{Q}_i(t'), t') & = L(q_i, \dot{q}_i, t) + \odv{}{t} f(q_i, t)
  \end{align}
}

\subsection{Noether's Theorem}
\thm{Noether's Theorem (No time translation)}{
  Every real paramter of a continuous symmetry of the action corresponds to a conserved quantity $\symcal{Q}$.
  If the continous symmetry is given by an infinitesimal transformation: $Q_i(t) = q_i(t) + \epsilon F_i(q(t), t) + \mathcal{O}(\epsilon^2)$,
  \begin{align}
    \symcal{Q} & = \sum_i F_i(q(t), t) \pdv{L(q(t), \dot{q}(t), t)}{\dot{q}_i} - \Lambda(q(t), t)
  \end{align}
  where $\Lambda(q(t), t)$ is the change in the Lagrangian under the infinitesimal transformation.
}
Now, assume that a system has a continous symmetry.
Thus if we consider a very "small" transformation that is almost the identity transformation:
\begin{align}
  Q_i(t) & = q_i(t) + \epsilon F_i(q(t), t) + \symcal{O}(\epsilon^2)
\end{align}
by differntiating w.r.t. $t$, we get
\begin{align}
  \dot{Q}_i (t) & = \dot{q}_i(t) + \epsilon \odv{}{t} F_i(q(t), t) + \symcal{O}(\epsilon^2)
\end{align}
Here, since the system has a symmetry under this transformation, the change in Lagrangian must be up to $\odv{f}{t} (q(t), t)$:
\begin{align}
  L(Q_i, \dot{Q}_i, t) - L(q_i, \dot{q}_i, t) = \odv{}{t} f(q(t), t)
\end{align}
given that the transformation is infinitesimal, we can write the change in Lagrangian as:
\begin{align}
  \odv{}{t} f(q(t), t)                                       & = \epsilon \odv{}{t} \Lambda(q(t), t) + \symcal{O}(\epsilon^2) \\
  \implies \quad L(Q_i, \dot{Q}_i, t) - L(q_i, \dot{q}_i, t) & = \epsilon \odv{}{t} \Lambda(q(t), t) + \symcal{O}(\epsilon^2)
  \label{eq:change_lagrangian1}
\end{align}
Now, the new Lagrangian can be expanded as a Taylor series around the old Lagrangian with a small parameter $\epsilon$:
\begin{align}
  L(Q_i, \dot{Q}_i, t) & = L(q_i, \dot{q}_i, t) + \sum_i  \pab{
    \epsilon F_i(q, t) \pdv{L(q_i, \dot{q}_i, t)}{q_i} + \epsilon \odv{}{t} F_i(q, t) \pdv{L(q_i, \dot{q}_i, t)}{\dot{q}_i}
  } + \symcal{O}(\epsilon^2)
\end{align}
So the change in Lagrangian is:
\begin{align}
  L(Q_i, \dot{Q}_i, t) - L(q_i, \dot{q}_i, t) & = \epsilon \sum_i \pab{
    F_i(q, t) \pdv{L(q_i, \dot{q}_i, t)}{q_i} + \odv{}{t} F_i(q, t) \pdv{L(q_i, \dot{q}_i, t)}{\dot{q}_i}
  } + \symcal{O}(\epsilon^2)
\end{align}
Frp, the Euler-Lagrange equation, we know that
\begin{align}
  \pdv{L(q_i, \dot{q}_i, t)}{q_i} = \odv{}{t} \pab{\pdv{L(q_i, \dot{q}_i, t)}{\dot{q}_i}}
\end{align}
the change in Lagrangian can be written as:
\begin{align}
  L(Q_i, \dot{Q}_i, t) - L(q_i, \dot{q}_i, t) & = \epsilon \odv{}{t} \sum_i \pab{
    F_i(q, t) \pdv{L(q_i, \dot{q}_i, t)}{\dot{q}_i}
  } + \symcal{O}(\epsilon^2)
  \label{eq:change_lagrangian2}
\end{align}
By comparing Eq. \eqref{eq:change_lagrangian1} and Eq. \eqref{eq:change_lagrangian2}, we can see that
\begin{align}
  \odv{}{t} \sum_i F_i(q(t), t) \pdv{L(q(t), \dot{q}(t), t)}{\dot{q}_i} & = \odv{}{t} \Lambda(q(t), t) \\
  \implies \quad \odv{}{t} \bab{
    \sum_i F_i(q(t), t) \pdv{L(q(t), \dot{q}(t), t)}{\dot{q}_i} - \Lambda(q(t), t)
  }                                                                     & = 0
\end{align}
Thus, the quantity:
\begin{align}
  \symcal{Q} & := \sum_i F_i(q(t), t) \pdv{L(q(t), \dot{q}(t), t)}{\dot{q}_i} - \Lambda(q(t), t)
\end{align}
does not change with time, that is, $\symcal{Q}$ is conserved.
This is \emph{Noether's theorem}.

In the case where the transformation includes time translation: $t' = t + \epsilon T(q(t), t) + \symcal{O}(\epsilon^2)$,
\begin{align}
  L(Q_i(t'), \dot{Q}_i(t'), t') & = L(Q_i(t), \dot{Q}_i(t), t) + \odv{}{t} f(Q_i(t), t)
\end{align}




\cite{hachiware-analyticalMechanics}